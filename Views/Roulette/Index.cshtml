@{
    ViewBag.Title = "Roulette";
}

<h2>Roulette</h2>

<div>
    <h3>Test Roulette Play</h3>
    
    <div>
        <label>Bet Type:</label>
        <select id="betType">
            <option value="0">STRAIGHT_UP</option>
            <option value="1">SPLIT</option>
            <option value="2">STREET</option>
            <option value="3">RED_OR_BLACK</option>
            <option value="4">ODD_OR_EVEN</option>
        </select>
    </div>
    
    <div>
        <label>Number(s) (comma-separated for SPLIT/STREET):</label>
        <input type="text" id="selectedNumbers" placeholder="e.g., 5 or 1,2" />
    </div>
    
    <div>
        <label>Wager Amount:</label>
        <input type="number" id="wagerAmount" value="10" />
    </div>
    
    <button id="playBtn">Play</button>
    
    <div id="result" style="margin-top: 20px;"></div>
</div>

<script>
document.getElementById('playBtn').addEventListener('click', async () => {
    const betType = parseInt(document.getElementById('betType').value);
    const numbersInput = document.getElementById('selectedNumbers').value;
    const wagerAmount = parseInt(document.getElementById('wagerAmount').value);
    
    const selected = numbersInput.split(',').map(n => parseInt(n.trim()));
    
    const payload = {
        wager: { wagerAmount, isPremiumToken: false },
        rouletteChoice: { betType, selected },
    };
    
    const response = await fetch('/api/games/roulette/play', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
    });
    
    const result = await response.json();
    document.getElementById('result').innerHTML = `<pre>${JSON.stringify(result, null, 2)}</pre>`;
});
</script>
